<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${create_candidate_title}"></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}"/>
    <style>
        h2, h3 {
            color: #212529;
            font-weight: bold;
            margin-bottom: 10px; /* Gi·∫£m kho·∫£ng c√°ch d∆∞·ªõi ti√™u ƒë·ªÅ */
            font-size: 20px; /* Thu nh·ªè k√≠ch th∆∞·ªõc ch·ªØ */
        }

        h2 {
            padding-bottom: 5px; /* Gi·∫£m padding d∆∞·ªõi */
        }

        .form-group {
            margin-bottom: 10px; /* Thu nh·ªè kho·∫£ng c√°ch gi·ªØa c√°c √¥ */
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 3px; /* Thu h·∫πp kho·∫£ng c√°ch gi·ªØa label v√† input */
            font-size: 14px;
        }

        input, select {
            width: 100%;
            padding: 8px; /* Gi·∫£m padding */
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: #fff;
            font-size: 14px; /* Thu nh·ªè ch·ªØ */
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus, select:focus {
            border-color: #007bff;
            box-shadow: 0 0 4px rgba(0, 123, 255, 0.5);
            outline: none;
        }

        .form-actions {
            text-align: center;
            margin-top: 20px; /* Thu h·∫πp kho·∫£ng c√°ch tr√™n */
        }

        .btn-submit {
            background-color: #007bff;
            color: white;
            padding: 8px 20px; /* Thu nh·ªè k√≠ch th∆∞·ªõc n√∫t */
            border: none;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px; /* Gi·∫£m ch·ªØ */
            transition: background-color 0.3s ease;
        }

        .btn-submit:hover {
            background-color: #0056b3;
        }

        .btn-cancel {
            background-color: #f8f9fa;
            color: #495057;
            padding: 8px 20px; /* Thu nh·ªè k√≠ch th∆∞·ªõc n√∫t */
            border: 1px solid #ced4da;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px; /* Gi·∫£m ch·ªØ */
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .btn-cancel:hover {
            background-color: #e2e6ea;
            color: #212529;
        }

        .skill-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px; /* Thu g·ªçn kho·∫£ng c√°ch gi·ªØa c√°c th·∫ª */
            border: 1px solid #ced4da;
            padding: 8px; /* Gi·∫£m padding */
        <!-- To√†n b·ªô th√¥ng tin ch·ªâ hi·ªÉn th·ªã n·∫øu ng∆∞·ªùi d√πng c√≥ m·ªôt trong c√°c role --> < div class = "d-flex" > <!-- Left sidebar --> < div class = "sidebar" th: replace = "~{component/left-sidebar::leftSidebar}" > < / div > <!-- N·ªôi dung ch√≠nh --> < div class = "content flex-grow-1" > < div class = "main-content" > < div class = "top-sidebar" > < div class = "top-sidebar-container" > < div class = "breadcrumb-section" > < nav aria-label = "breadcrumb" > < ol class = "breadcrumb mb-0" > < li class = "breadcrumb-item" > < a href = "/dashboard" > < i class = "fas fa-home" > < / i > < span th: text = "${home_page}" > < / span > < / a > < / li > < li class = "breadcrumb-item" > < a th: href = "@{/candidate/list}" > < span th: text = "${candidate_list_title}" > < / span > < / a > < / li > < li class = "breadcrumb-item active" aria-current = "page" th: text = "${candidate_details}" > < / li > < / ol > < / nav > < / div > < div class = "top-sidebar-actions" > <!-- Notifications --> < div class = "dropdown" > < button class = "btn action-btn" type = "button" data-bs-toggle = "dropdown" aria-expanded = "false" > < i class = "fas fa-bell" > < / i > < span class = "notification-badge" > 3 < / span > < / button > < ul class = "dropdown-menu dropdown-menu-end notification-menu" > < li class = "dropdown-header" > < h6 class = "mb-0" > Notifications < / h6 > < span class = "text-muted small" > You have 3 unread messages < / span > < / li > < li > < hr class = "dropdown-divider" > < / li > < li > < a class = "dropdown-item notification-item unread" href = "#" > < div class = "notification-icon bg-primary" > < i class = "fas fa-calendar-check text-white" > < / i > < / div > < div class = "notification-text" > < p class = "mb-0" > New interview scheduled < / p > < span class = "text-muted small" > 15 minutes ago < / span > < / div > < / a > < / li > < li > < a class = "dropdown-item notification-item unread" href = "#" > < div class = "notification-icon bg-success" > < i class = "fas fa-user-check text-white" > < / i > < / div > < div class = "notification-text" > < p class = "mb-0" > Candidate profile updated < / p > < span class = "text-muted small" > 1 hour ago < / span > < / div > < / a > < / li > < li > < a class = "dropdown-item notification-item unread" href = "#" > < div class = "notification-icon bg-warning" > < i class = "fas fa-clock text-white" > < / i > < / div > < div class = "notification-text" > < p class = "mb-0" > Interview reminder < / p > < span class = "text-muted small" > Tomorrow, 10: 00 AM < / span > < / div > < / a > < / li > < li > < hr class = "dropdown-divider" > < / li > < li > < a class = "dropdown-item text-center small" href = "#" > View all notifications < / a > < / li > < / ul > < / div > <!-- Settings --> < div class = "dropdown" > < button class = "btn action-btn" type = "button" data-bs-toggle = "dropdown" aria-expanded = "false" > < i class = "fas fa-cog" > < / i > < / button > < ul class = "dropdown-menu dropdown-menu-end" > < li > < a class = "dropdown-item" href = "#" > < i class = "fas fa-user-cog me-2" > < / i > Account Settings < / a > < / li > < li > < a class = "dropdown-item" href = "#" > < i class = "fas fa-palette me-2" > < / i > Appearance < / a > < / li > < li > < a class = "dropdown-item" href = "#" > < i class = "fas fa-bell me-2" > < / i > Notification Settings < / a > < / li > < li > < hr class = "dropdown-divider" > < / li > < li > < a class = "dropdown-item" href = "#" > < i class = "fas fa-question-circle me-2" > < / i > Help Center < / a > < / li > < / ul > < / div > <!-- User Profile - REDESIGNED --> < div class = "dropdown" > < div class = "user-profile" data-bs-toggle = "dropdown" > < div class = "user-avatar-container" > < img th: src = "${session.account != null ? 'https://ui-avatars.com/api/?name=' + session.account.getFullname() + '&background=random' : 'https://ui-avatars.com/api/?name=User&background=random'}" alt = "User" class = "user-avatar" > < span class = "user-status" > < / span > < / div > < div class = "user-info d-none d-md-flex" > < span class = "user-name" th: text = "${session.account != null ? session.account.getFullname() : 'User Name'}" > User Name < / span > < span class = "user-role" th: text = "${session.account != null ? session.account.getDepartmentName() : 'Department'}" > Department < / span > < / div > < button class = "user-dropdown-btn" > < i class = "fas fa-chevron-down" > < / i > < / button > < / div > < ul class = "dropdown-menu dropdown-menu-end" > < li > < a class = "dropdown-item" href = "#" > < i class = "fas fa-user me-2" > < / i > My Profile < / a > < / li > < li > < a class = "dropdown-item" href = "#" > < i class = "fas fa-history me-2" > < / i > Activity Log < / a > < / li > < li > < hr class = "dropdown-divider" > < / li > < li > < a class = "dropdown-item" href = "#" onclick = "logout()" > < i class = "fas fa-sign-out-alt me-2" > < / i > Logout < / a > < / li > < / ul > < / div > < / div > < / div > < / div > min-height: 36 px; /* Gi·∫£m chi·ªÅu cao t·ªëi thi·ªÉu */
            align-items: center;
            background-color: #fff;
            border-radius: 4px;
            transition: border-color 0.3s ease;
        }

        .skill-container:hover {
            border-color: #007bff;
        }

        .skill-tag {
            background-color: #007bff;
            color: white;
            padding: 6px 12px; /* Thu nh·ªè padding */
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 5px; /* Thu g·ªçn kho·∫£ng c√°ch trong th·∫ª */
            font-size: 12px; /* Gi·∫£m k√≠ch th∆∞·ªõc ch·ªØ */
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .skill-tag:hover {
            background-color: #0056b3;
        }

        .skill-tag .remove-skill {
            display: inline;
            font-weight: bold;
            color: #ffc107;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .skill-tag:hover .remove-skill {
            color: #ffeb3b;
        }

        .error-message {
            font-size: 13px;
            margin-top: 5px;
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
        }

        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: #fff;
            font-size: 14px;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="gray"><path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" /></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
        }
    </style>
</head>
<body>

<!-- To√†n b·ªô th√¥ng tin ch·ªâ hi·ªÉn th·ªã n·∫øu ng∆∞·ªùi d√πng c√≥ m·ªôt trong c√°c role -->
<div class="d-flex">
    <!-- Left sidebar -->
    <div class="sidebar" th:replace="~{component/left-sidebar::leftSidebar}"></div>

    <!-- N·ªôi dung ch√≠nh -->
    <div class="content flex-grow-1">
        <div class="main-content">
            <!-- Top Sidebar / Header -->
            <div
                    th:replace="~{component/new-top-sidebar::newTopSidebar(${candidate_list_title}, '/candidate/list', ${create_candidate_title})}">
            </div>

            <div class="stats-section">
                <div class="stat-card">
                    <i class="fas fa-user stat-card-bg-icon"></i>
                    <div class="stat-card-title" th:text="${create_candidate_title}"></div>
                </div>
            </div>

<div class="card shadow-lg p-4 mb-4 bg-white rounded">
            <form id="candidateForm" th:action="@{/candidate/add}" method="post" enctype="multipart/form-data">
                <h3 th:text="${personal_information_title}"></h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>
                                <span th:text="${full_name}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="text" name="fullName" id="fullName" class="form-control"
                                   th:placeholder="${input_full_name}">
                            <small class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${dob}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="date" name="dob" id="dob" class="form-control" onchange="calculateAge()" >
                            <small id="dobError" class="error-message text-danger"></small>
                        </div>

                        <!-- Tr∆∞·ªùng hi·ªÉn th·ªã tu·ªïi (readonly) -->
                        <div class="form-group">
                            <label th:text="${age_title} + ':'"></label>
                            <input type="number" id="age" class="form-control" readonly>
                            <small id="ageError" class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${phone}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="text" name="phone" id="phone" class="form-control"
                                   th:placeholder="${input_phone}">
                            <small id="phoneError" class="error-message text-danger"></small> <!-- Th√™m d√≤ng n√†y -->
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group">
                            <label>
                                <span th:text="${email}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="text" name="email" id="email" class="form-control"
                                   th:placeholder="${input_email}">
                            <small class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${address}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="text" name="address" id="address" class="form-control"
                                   th:placeholder="${input_address}">
                            <small class="error-message text-danger"></small>
                        </div>


                        <div class="form-group">
                            <label>
                                <span th:text="${gender}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <select name="gender" id="gender" class="form-control">
                                <option value="" th:text="${select_gender}"></option>
                                <option value="0" th:text="${male}"></option>
                                <option value="1" th:text="${female}"></option>
                                <option value="2" th:text="${other_gender}"></option>
                            </select>
                            <small class="error-message text-danger"></small>
                        </div>
                    </div>
                </div>

                <h3 th:text="${professional_information_title}"></h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>
                                <span th:text="${cv_attachment}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="file" name="cvFile" id="cvFile" class="form-control" onchange="validateCV()">
                            <small id="cvError" class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${positionTitle}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <select name="positionId" id="position" class="form-control">
                                <option value="" th:text="${select_position}"></option>
                                <option th:each="p : ${positions}" th:value="${p.id}" th:text="${p.name}"></option>
                            </select>
                            <small class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${skill}"></span>
                            </label>
                            <div id="selectedSkills" class="skill-container"></div>
                            <select id="skillSelect" class="form-control">
                                <option value="" th:text="${select_skill}"></option>
                                <option th:each="skill : ${skills}" th:value="${skill.name}"
                                        th:text="${skill.name}"></option>
                            </select>
                            <small class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label th:text="${recruiter}"></label>
                            <select name="recruiterId" id="recruiter" class="form-control">
                                <option value="" th:text="${assigned_to_me}"></option>
                                <option th:each="r : ${recruiters}" th:value="${r.userID}"
                                        th:text="${r.fullname}"></option>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group">
                            <label th:text="${note}"></label>
                            <input type="text" name="note" id="note" class="form-control" value="N/A">
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${statusTitle}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <select name="status" id="status" class="form-control">
                                <option value="Open" selected th:text="${open_title}"></option>
                                <option value="Banned" th:text="${banned_title}"></option>
                            </select>
                            <small class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${year_of_experience}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <input type="number" name="experience" id="experience" class="form-control"
                                   th:placeholder="${input_yoe}" oninput="validateExperience()" min="0">
                            <small id="experienceError" class="error-message text-danger"></small>
                        </div>

                        <div class="form-group">
                            <label>
                                <span th:text="${highest_level_title}"></span>
                                <span style="color: red;">*</span>
                            </label>
                            <select name="highestEducation" id="highestEducation" class="form-control">
                                <option value="" th:text="${select_education}"></option>
                                <option th:each="level : ${highestLevels}"
                                        th:value="${level.id}"
                                        th:text="${level.name}">
                                </option>
                            </select>
                            <small class="error-message text-danger"></small>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-submit rounded" th:text="${submitBtn}"></button>
                    <button type="button" class="btn btn-secondary btn-cancel rounded" onclick="confirmNavigation(event, 'list')"
                            th:text="${cancelBtn}"></button>
                </div>
            </form>
        </div>
    </div>
</div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const skillSelect = document.getElementById("skillSelect");
        const selectedSkillsContainer = document.getElementById("selectedSkills");

        // üëâ Th√™m input hidden ƒë·ªÉ l∆∞u danh s√°ch k·ªπ nƒÉng
        const skillInputHidden = document.createElement("input");
        skillInputHidden.setAttribute("type", "hidden");
        skillInputHidden.setAttribute("name", "skills");
        selectedSkillsContainer.appendChild(skillInputHidden);

        let selectedSkills = [];

        skillSelect.addEventListener("change", function () {
            const selectedValue = skillSelect.value;
            if (selectedValue && !selectedSkills.includes(selectedValue)) {
                selectedSkills.push(selectedValue);
                updateSkillDisplay();
            }
            skillSelect.value = ""; // Reset dropdown
        });

        function updateSkillDisplay() {
            selectedSkillsContainer.innerHTML = ""; // Clear old tags
            selectedSkills.forEach(skill => {
                const skillTag = document.createElement("div");
                skillTag.classList.add("skill-tag");
                skillTag.innerHTML = `${skill} <span class="remove-skill">‚úñ</span> <input type="hidden" name="skills" value="${skill}"/>`;
                skillTag.querySelector(".remove-skill").addEventListener("click", function () {
                    selectedSkills = selectedSkills.filter(s => s !== skill);
                    updateSkillDisplay();
                });
                selectedSkillsContainer.appendChild(skillTag);
            });

            // üëâ C·∫≠p nh·∫≠t input hidden v·ªõi danh s√°ch skills (quan tr·ªçng)
            skillInputHidden.value = selectedSkills.join(",");
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        var input = document.getElementById("cvFile");
        var errorMessage = input.nextElementSibling;
        var maxSize = 2 * 1024 * 1024; // 2MB

        input.addEventListener("change", function () {
            if (input.files.length > 0) {
                var fileSize = input.files[0].size;

                if (fileSize > maxSize) {
                    errorMessage.textContent = "CV file is too large. Please select a file smaller than 2MB.";
                    errorMessage.style.display = "block";
                    input.value = ""; // X√≥a file kh·ªèi input
                } else {
                    errorMessage.textContent = "";
                    errorMessage.style.display = "none";
                }
            }
        });
    });

    document.addEventListener("DOMContentLoaded", function () {
        const modal = new bootstrap.Modal(document.getElementById("confirmationModal"));
        const modalMessage = document.getElementById("modalMessage");
        const confirmExit = document.getElementById("confirmExit");

        function confirmNavigation(event, actionType) {
            event.preventDefault(); // NgƒÉn ch·∫∑n h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh

            if (actionType === "list") {
                modalMessage.textContent = "If you exit, your input will not be saved. Do you want to exit?";
            } else if (actionType === "cancel") {
                modalMessage.textContent = "Do you want to cancel creating a new candidate?";
            }

            confirmExit.onclick = function () {
                window.location.href = "/candidate/list";
            };
            modal.show(); // Hi·ªÉn th·ªã modal
        }

        window.confirmNavigation = confirmNavigation;
    });

    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("candidateForm");
        const confirmationModal = new bootstrap.Modal(document.getElementById("confirmationModalAdd"));
        const confirmSubmitBtn = document.getElementById("confirmSubmit");

        form.addEventListener("submit", function (event) {
            let isValid = true;

            // Danh s√°ch c√°c tr∆∞·ªùng c·∫ßn ki·ªÉm tra
            const requiredFields = [
                "fullName", "email", "gender", "position",
                "status", "address", "highestEducation", "experience","dob", "experience"
            ];

            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorMessage = field.nextElementSibling;

                if (!field.value.trim()) {
                    errorMessage.textContent = "This field is required.";
                    errorMessage.style.display = "block";
                    isValid = false;
                } else {
                    errorMessage.style.display = "none";
                }
            });

            // Ki·ªÉm tra ƒë·ªãnh d·∫°ng email
            const emailField = document.getElementById("email");
            const emailErrorMessage = emailField.nextElementSibling;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailField.value.trim())) {
                emailErrorMessage.textContent = "Invalid email address.";
                emailErrorMessage.style.display = "block";
                isValid = false;
            } else {
                emailErrorMessage.style.display = "none";
            }

            // Ki·ªÉm tra s·ªë ƒëi·ªán tho·∫°i
            const phoneField = document.getElementById("phone");
            const phoneErrorMessage = document.getElementById("phoneError");
            const phoneRegex = /^\d{10}$/;

            if (!phoneRegex.test(phoneField.value.trim())) {
                phoneErrorMessage.textContent = "Phone number must be exactly 10 digits.";
                phoneErrorMessage.style.display = "block";
                isValid = false;
            } else {
                phoneErrorMessage.textContent = "";
                phoneErrorMessage.style.display = "none";
            }

            // Ki·ªÉm tra file CV
            const cvFile = document.getElementById("cvFile");
            const cvError = cvFile.nextElementSibling;
            if (!cvFile.files.length) {
                cvError.textContent = "Please upload your CV.";
                cvError.style.display = "block";
                isValid = false;
            } else {
                cvError.textContent = "";
                cvError.style.display = "none";
            }

            // Ki·ªÉm tra ng√†y sinh & tu·ªïi
            const dobField = document.getElementById("dob");
            const dobErrorMessage = dobField.nextElementSibling;
            const ageInput = document.getElementById("age");
            const ageError = document.getElementById("ageError");

            let today = new Date();
            let dobValue = new Date(dobField.value);
            let age = today.getFullYear() - dobValue.getFullYear();
            let monthDiff = today.getMonth() - dobValue.getMonth();

            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dobValue.getDate())) {
                age--;
            }

            if (dobField.value === "") {
                dobErrorMessage.textContent = "Date of Birth is required.";
                dobErrorMessage.style.display = "block";
                isValid = false;
            }
            else {
                if (dobValue >= today) {
                    dobErrorMessage.textContent = "Date of Birth must be in the past.";
                    dobErrorMessage.style.display = "block";
                    isValid = false;
                } else {
                    dobErrorMessage.style.display = "none";
                }

                ageInput.value = age;

                if (age < 18 || age > 55) {
                    ageError.textContent = "Age must be between 18 and 55!";
                    ageError.style.display = "block";
                    isValid = false;
                } else {
                    ageError.style.display = "none";
                }
            }

            // Ki·ªÉm tra s·ªë nƒÉm kinh nghi·ªám kh√¥ng ƒë∆∞·ª£c l·ªõn h∆°n tu·ªïi
            const experienceField = document.getElementById("experience");
            const experienceError = document.getElementById("experienceError");
            let experience = parseInt(experienceField.value);

            if (experienceField.value === "") {
                experienceError.textContent = "Year of Experience is required.";
                experienceError.style.display = "block";
                isValid = false;
            } else if (!isNaN(experience) && experience > age) {
                experienceError.textContent = "The number of years of experience cannot be greater than age!";
                experienceError.style.display = "block";
                isValid = false;
            } else {
                experienceError.style.display = "none";
            }

            // N·∫øu c√≥ l·ªói, ngƒÉn form g·ª≠i ƒëi
            if (!isValid) {
                event.preventDefault();
                return;
            }

            // N·∫øu h·ª£p l·ªá, hi·ªÉn th·ªã modal x√°c nh·∫≠n thay v√¨ submit ngay l·∫≠p t·ª©c
            event.preventDefault(); // NgƒÉn form submit ngay l·∫≠p t·ª©c
            confirmationModal.show(); // Hi·ªÉn th·ªã modal x√°c nh·∫≠n

            // Khi ng∆∞·ªùi d√πng nh·∫•n "Yes", th·ª±c hi·ªán g·ª≠i form
            confirmSubmitBtn.onclick = function () {
                form.submit();
            };
        });
    });
</script>

<script>
    function calculateAge() {
        const dobField = document.getElementById("dob");
        const ageField = document.getElementById("age");
        const dobError = document.getElementById("dobError");
        const ageError = document.getElementById("ageError");
        c
        if (!dobField.value) {
            dobError.textContent = "Please select your date of birth.";
            ageField.value = ""; // X√≥a tu·ªïi n·∫øu kh√¥ng c√≥ ng√†y sinh
            return;
        }

        const today = new Date();
        const dob = new Date(dobField.value);
        let age = today.getFullYear() - dob.getFullYear();
        let monthDiff = today.getMonth() - dob.getMonth();

        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
            age--;
        }

        if (dob >= today) {
            dobError.textContent = "Date of Birth must be in the past.";
            ageField.value = "";
            return;
        } else {
            dobError.textContent = ""; // X√≥a l·ªói n·∫øu h·ª£p l·ªá
        }

        ageField.value = age; // Hi·ªÉn th·ªã tu·ªïi trong √¥ input

        // Ki·ªÉm tra ƒëi·ªÅu ki·ªán tu·ªïi (18-55)
        if (age < 18 || age > 55) {
            ageError.textContent = "Age must be between 18 and 55!";
        } else {
            ageError.textContent = "";
        }
    }
</script>

<!-- Modal Cancel -->
<div id="confirmationModal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" th:text="${confirm_btn}"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="modalMessage"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="confirmExit" th:text="${yes_btn}"></button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" th:text="${no_btn}"></button>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Modal x√°c nh·∫≠n -->
<div class="modal fade" id="confirmationModalAdd" tabindex="-1" aria-labelledby="confirmationModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalLabel" th:text="${confirm_submit}"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" th:text="${confirm_create_candidate}"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" th:text="${no_btn}"></button>
                <button type="button" class="btn btn-primary" id="confirmSubmit" th:text="${yes_btn}"></button>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const errorMessage = "[[${error}]]"; // L·∫•y th√¥ng b√°o l·ªói t·ª´ Controller

        if (errorMessage && errorMessage.trim() !== "" && errorMessage !== "null") {
            Swal.fire({
                icon: 'error',
                title: 'Add new candidate failed!',
                text: errorMessage,
                confirmButtonText: 'OK'
            });
        }
    });
</script>
<!-- SweetAlert2 Delete & Ban & Create Candidate -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
